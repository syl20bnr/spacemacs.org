<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-04-29 Sat 04:11 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Haskell layer</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css"
                 href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
          <script type="text/javascript"
                  src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
          <script>
           (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
               (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
               Date();a=s.createElement(o),
               m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
               })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

           ga('create', 'UA-28326243-2', 'auto'); ga('send', 'pageview');
          </script>
<link rel="stylesheet" type="text/css" href="../../../css/readtheorg.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="toggle-sidebar"><a href="#table-of-contents"><h2>Table of Contents</h2></a></div>
<h1 class="title">Haskell layer</h1>
<div id="table-of-contents">
<h2>Table of Contents<a href="#">Close</a></h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#description">1. Description</a>
<ul>
<li><a href="#features">1.1. Features:</a></li>
</ul>
</li>
<li><a href="#install">2. Install</a>
<ul>
<li><a href="#layer">2.1. Layer</a></li>
<li><a href="#dependencies">2.2. Dependencies</a></li>
<li><a href="#setup-path">2.3. Setup PATH</a></li>
<li><a href="#completion-support">2.4. Completion support</a>
<ul>
<li><a href="#company-ghci">2.4.1. <code>company-ghci</code></a></li>
<li><a href="#intero">2.4.2. <code>intero</code></a></li>
<li><a href="#ghc-mod">2.4.3. <code>ghc-mod</code></a></li>
</ul>
</li>
<li><a href="#optional-extras">2.5. Optional extras</a>
<ul>
<li><a href="#structured-haskell-mode">2.5.1. structured-haskell-mode</a></li>
<li><a href="#hindent">2.5.2. hindent</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#key-bindings">3. Key bindings</a>
<ul>
<li><a href="#documentation">3.1. Documentation</a></li>
<li><a href="#debug">3.2. Debug</a></li>
<li><a href="#debug-buffer">3.3. Debug Buffer</a></li>
<li><a href="#repl">3.4. REPL</a></li>
<li><a href="#intero-repl">3.5. Intero REPL</a></li>
<li><a href="#cabal-commands">3.6. Cabal commands</a></li>
<li><a href="#cabal-files">3.7. Cabal files</a></li>
<li><a href="#refactor">3.8. Refactor</a></li>
<li><a href="#ghc-mod-1">3.9. Ghc-mod</a>
<ul>
<li><a href="#insert-template">3.9.1. Insert template</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#syntax-checking">4. Syntax checking</a>
<ul>
<li><a href="#flycheck">4.1. Flycheck</a></li>
<li><a href="#hlint">4.2. HLint</a></li>
<li><a href="#ghc-mod-2">4.3. ghc-mod</a></li>
<li><a href="#interactive-haskell-mode">4.4. Interactive haskell-mode</a></li>
<li><a href="#flymake">4.5. Flymake</a></li>
<li><a href="#troubleshooting">4.6. Troubleshooting</a></li>
</ul>
</li>
<li><a href="#faq">5. FAQ</a>
<ul>
<li><a href="#the-repl-doesnt-work">5.1. The REPL doesn't work</a></li>
<li><a href="#the-repl-is-stuck">5.2. The REPL is stuck</a></li>
<li><a href="#i-am-using-stack-and-ghc-mod-but-ghc-mod-doesnt-work">5.3. I am using <code>stack</code> and <code>ghc-mod</code>, but <code>ghc-mod</code> doesn't work</a></li>
<li><a href="#ghc-mod-doesnt-work">5.4. <code>ghc-mod</code> doesn't work</a></li>
<li><a href="#indentation-doesnt-reset-when-pressing-return-after-an-empty-line">5.5. Indentation doesn't reset when pressing return after an empty line</a></li>
<li><a href="#flycheck-displays-hlint-warnings-but-not-errors">5.6. Flycheck displays HLint warnings but not errors</a></li>
<li><a href="#i-can-see-highlighted-errors-but-they-dont-appear-in-the-error-list">5.7. I can see highlighted errors but they don't appear in the error list</a></li>
<li><a href="#flycheck-doesnt-work">5.8. Flycheck doesn't work</a></li>
<li><a href="#flycheck-doesnt-work-with-stack">5.9. Flycheck doesn't work with <code>stack</code></a>
<ul>
<li><a href="#the-stack-build-directory-is-wrong">5.9.1. The stack build directory is wrong</a></li>
<li><a href="#the-project-root-directory-is-not-set-properly">5.9.2. The Project root directory is not set properly</a></li>
</ul>
</li>
<li><a href="#haskell-mode-commands-dont-work">5.10. haskell-mode commands don't work</a></li>
<li><a href="#ghc-mod-and-haskell-mode-commands-overlap-how-do-i-know-which-command-belongs-to-what">5.11. <code>ghc-mod</code> and <code>haskell-mode</code> commands overlap. How do I know which command belongs to what?</a></li>
<li><a href="#some-commands-start-with-ghc--and-some-with-haskell--what-does-that-mean">5.12. Some commands start with <code>ghc-</code> and some with <code>haskell-</code>. What does that mean?</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="figure">
<p><img src="img/haskell.png" alt="haskell.png" />
</p>
</div>

<div id="outline-container-org6db1f23" class="outline-2">
<h2 id="description"><a id="org6db1f23"></a><span class="section-number-2">1</span> Description</h2>
<div class="outline-text-2" id="text-description">
<p>
This layer adds support for the <a href="https://www.haskell.org/">Haskell</a> language.
</p>
</div>

<div id="outline-container-orgd37ed4b" class="outline-3">
<h3 id="features"><a id="orgd37ed4b"></a><span class="section-number-3">1.1</span> Features:</h3>
<div class="outline-text-3" id="text-features">
<ul class="org-ul">
<li>syntax highlighting for <a href="https://github.com/haskell/haskell-mode">haskell source</a>, <a href="https://github.com/haskell/haskell-mode">cabal files</a>, <a href="https://github.com/bgamari/cmm-mode">C&#x2013; source</a>,</li>
<li>auto-completion with one of selected backends (<code>intero</code>, <code>ghci</code> or <code>ghc-mod</code>).</li>
</ul>

<p>
<b>This layer is in construction, it needs your contributions and bug reports.</b>
</p>
</div>
</div>
</div>

<div id="outline-container-org5929e2c" class="outline-2">
<h2 id="install"><a id="org5929e2c"></a><span class="section-number-2">2</span> Install</h2>
<div class="outline-text-2" id="text-install">
</div>

<div id="outline-container-orga609303" class="outline-3">
<h3 id="layer"><a id="orga609303"></a><span class="section-number-3">2.1</span> Layer</h3>
<div class="outline-text-3" id="text-layer">
<p>
To use this configuration layer, add it to your <code>~/.spacemacs</code>. You will need to
add <code>haskell</code> to the existing <code>dotspacemacs-configuration-layers</code> list in this
file.
</p>
</div>
</div>

<div id="outline-container-org68a3305" class="outline-3">
<h3 id="dependencies"><a id="org68a3305"></a><span class="section-number-3">2.2</span> Dependencies</h3>
<div class="outline-text-3" id="text-dependencies">
<p>
This layer requires some <a href="https://www.haskell.org/cabal/">cabal</a> packages:
</p>
<ul class="org-ul">
<li><code>apply-refact</code> (required by <code>hlint-refactor</code>)</li>
<li><code>hlint</code> (required by <code>hlint-refactor</code>)</li>
<li><code>stylish-haskell</code> (optional for <code>haskell-mode</code>)</li>
<li><code>hasktags</code> (optional)</li>
<li><code>hoogle</code> (optional for <code>haskell-mode</code> and <code>helm-hoogle</code>)</li>
<li><code>ghc-mod</code> (optional for completion)</li>
<li><code>intero</code> (optional for completion)</li>
</ul>

<p>
To install them, use following command (or the <code>stack</code> equivalent):
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cabal install apply-refact hlint stylish-haskell hasktags hoogle
</pre>
</div>
</div>
</div>

<div id="outline-container-orgede0904" class="outline-3">
<h3 id="setup-path"><a id="orgede0904"></a><span class="section-number-3">2.3</span> Setup PATH</h3>
<div class="outline-text-3" id="text-setup-path">
<p>
First of all make sure that your <code>$PATH</code> contains the installation path for
Haskell tools like <code>ghc</code>, <code>ghci</code> etc. It depends on how you have installed
<code>ghc</code>, but you can always check it by running <code>which ghc</code> in your terminal.
<code>Stack</code> users should add only the installation path of <code>stack</code> itself. Usually
it's <code>~/.local/bin</code>.
</p>

<p>
Then make sure that your <code>$PATH</code> contains the installation path for <code>cabal</code>
packages. If you are using <code>cabal</code> it should be <code>~/.cabal/bin</code> or
<code>~/Library/Haskell/bin</code> (for 'Haskell for Mac' users). If you
are using <code>stack</code> then it should be <code>~/.local/bin</code>.
</p>

<p>
For information about setting up <code>$PATH</code>, check out the corresponding section in
the FAQ (<code>SPC h SPC $PATH RET</code>).
</p>
</div>
</div>

<div id="outline-container-orgdd93c65" class="outline-3">
<h3 id="completion-support"><a id="orgdd93c65"></a><span class="section-number-3">2.4</span> Completion support</h3>
<div class="outline-text-3" id="text-completion-support">
<p>
This layer provides several completion backends - <code>intero</code>, <code>ghci</code> and
<code>ghc-mod</code>. By default <code>ghci</code> (<code>company-ghci</code>) is used as it requires no
dependencies and works both with <code>stack</code> and pure <code>cabal</code> projects. In order to
manually set completion backend set value of <code>haskell-completion-backend</code>. Note
that in order to enable completion you have to enable <code>auto-completion</code> layer as
well.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers
              '<span class="org-rainbow-delimiters-depth-2">(</span>auto-completion
                <span class="org-rainbow-delimiters-depth-3">(</span>haskell <span class="org-builtin">:variables</span> haskell-completion-backend 'intero<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-orgaa87dd9" class="outline-4">
<h4 id="company-ghci"><a id="orgaa87dd9"></a><span class="section-number-4">2.4.1</span> <code>company-ghci</code></h4>
<div class="outline-text-4" id="text-company-ghci">
<p>
<a href="https://github.com/juiko/company-ghci">company-ghci</a> communicates directly with <code>ghci</code> in order to provide completion. In
order to use it you have to call <code>haskell-process-load-or-reload</code> (<code>SPC s b</code>).
</p>
</div>
</div>

<div id="outline-container-org8fa79e1" class="outline-4">
<h4 id="intero"><a id="org8fa79e1"></a><span class="section-number-4">2.4.2</span> <code>intero</code></h4>
<div class="outline-text-4" id="text-intero">
<p>
<code>Intero</code> works only for <code>stack</code> users. You can manually install <code>intero</code> executable by
calling <code>stack install intero</code>, but this step is optional as <code>Intero</code> installs
itself.
</p>
</div>
</div>

<div id="outline-container-orgda63892" class="outline-4">
<h4 id="ghc-mod"><a id="orgda63892"></a><span class="section-number-4">2.4.3</span> <code>ghc-mod</code></h4>
<div class="outline-text-4" id="text-ghc-mod">
<p>
<a href="http://www.mew.org/~kazu/proj/ghc-mod/">ghc-mod</a> enhances <code>haskell-mode</code> with for example code completion, templates,
case-splitting and much more. In order to use it you need to install the
executable with <code>cabal install ghc-mod</code> (or <code>stack</code> equivalent).
</p>

<p>
<code>Stack</code> users also should make sure that <code>dist/setup-config</code> doesn't exist in the
project root. As it will confuse <code>ghc-mod</code>. For more troubleshooting, checkout
this <a href="https://github.com/DanielG/ghc-mod/wiki#user-content-known-issues-related-to-stack">document</a>.
</p>

<p>
Also note that <code>ghc-mod</code> works only with <code>GHC</code> version that was used to build
<code>ghc-mod</code>. You can check which version was used by calling <code>ghc-mod --version</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-orga70803e" class="outline-3">
<h3 id="optional-extras"><a id="orga70803e"></a><span class="section-number-3">2.5</span> Optional extras</h3>
<div class="outline-text-3" id="text-optional-extras">
<p>
The Haskell layer supports some extra features that can be enabled through layer
variables.
</p>
</div>

<div id="outline-container-org238ba12" class="outline-4">
<h4 id="structured-haskell-mode"><a id="org238ba12"></a><span class="section-number-4">2.5.1</span> structured-haskell-mode</h4>
<div class="outline-text-4" id="text-structured-haskell-mode">
<p>
Currently there is no support for <a href="https://github.com/chrisdone/structured-haskell-mode">structured-haskell-mode</a>, since it doesn't play
very well with non-emacs editing style (<a href="https://github.com/chrisdone/structured-haskell-mode/issues/81">structured-haskell-mode/#81</a>). Emacs
editing style users might easily enable it by adding <code>structured-haskell-mode</code> to
list of <code>dotspacemacs-additional-packages</code> in your <code>.spacemacs</code> file. For more
installation instructions, please refer to the official documentation at
<a href="https://github.com/chrisdone/structured-haskell-mode#features">structured-haskell-mode</a> page. In case you are non-emacs editing style user and
still want to use <code>structured-haskell-mode</code> - use it at your own risk.
</p>

<p>
Any contributions that will help to solve issues with <code>structured-haskell-mode</code>
are warmly welcome!
</p>
</div>
</div>

<div id="outline-container-orga6013b6" class="outline-4">
<h4 id="hindent"><a id="orga6013b6"></a><span class="section-number-4">2.5.2</span> hindent</h4>
<div class="outline-text-4" id="text-hindent">
<p>
<a href="https://github.com/commercialhaskell/hindent">hindent</a> is an extensible Haskell pretty printer, which let's you
reformat your code. You need to install the executable with <code>cabal
install hindent</code> or <code>stack install hindent</code>
</p>

<p>
To enable it you have to set the variable <code>haskell-enable-hindent-style</code> to a
supported style. The available styles are:
</p>
<ul class="org-ul">
<li>fundamental</li>
<li>johan-tibell</li>
<li>chris-done</li>
<li>gibiansky</li>
</ul>

<p>
See examples <a href="https://github.com/commercialhaskell/hindent/blob/master/TESTS.md">here</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>haskell <span class="org-builtin">:variables</span> haskell-enable-hindent-style <span class="org-string">"johan-tibell"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org75c7f6f" class="outline-2">
<h2 id="key-bindings"><a id="org75c7f6f"></a><span class="section-number-2">3</span> Key bindings</h2>
<div class="outline-text-2" id="text-key-bindings">
<p>
All Haskell specific bindings are prefixed with the major-mode leader
<code>SPC m</code>.
</p>

<p>
Top-level commands are prefixed by <code>SPC m</code>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m g g</code></td>
<td class="org-left">go to definition or tag</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g i</code></td>
<td class="org-left">cycle the Haskell import lines or return to point (with prefix arg)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m F</code></td>
<td class="org-left">format buffer using haskell-stylish</td>
</tr>

<tr>
<td class="org-left"><code>SPC m f</code></td>
<td class="org-left">format declaration using hindent (if enabled)</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org6904daf" class="outline-3">
<h3 id="documentation"><a id="org6904daf"></a><span class="section-number-3">3.1</span> Documentation</h3>
<div class="outline-text-3" id="text-documentation">
<p>
Documentation commands are prefixed by <code>SPC m h</code>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m h d</code></td>
<td class="org-left">find or generate Haddock documentation for the identifier under the cursor</td>
</tr>

<tr>
<td class="org-left"><code>SPC m h f</code></td>
<td class="org-left">do a helm-hoogle lookup</td>
</tr>

<tr>
<td class="org-left"><code>SPC m h h</code></td>
<td class="org-left">do a Hoogle lookup</td>
</tr>

<tr>
<td class="org-left"><code>SPC m h H</code></td>
<td class="org-left">do a local Hoogle lookup</td>
</tr>

<tr>
<td class="org-left"><code>SPC m h i</code></td>
<td class="org-left">gets information for the identifier under the cursor</td>
</tr>

<tr>
<td class="org-left"><code>SPC m h t</code></td>
<td class="org-left">gets the type of the identifier under the cursor</td>
</tr>

<tr>
<td class="org-left"><code>SPC m h y</code></td>
<td class="org-left">do a Hayoo lookup</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgecddec0" class="outline-3">
<h3 id="debug"><a id="orgecddec0"></a><span class="section-number-3">3.2</span> Debug</h3>
<div class="outline-text-3" id="text-debug">
<p>
Debug commands are prefixed by <code>SPC m d</code>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m d a</code></td>
<td class="org-left">abandon current process</td>
</tr>

<tr>
<td class="org-left"><code>SPC m d b</code></td>
<td class="org-left">insert breakpoint at function</td>
</tr>

<tr>
<td class="org-left"><code>SPC m d B</code></td>
<td class="org-left">delete breakpoint</td>
</tr>

<tr>
<td class="org-left"><code>SPC m d c</code></td>
<td class="org-left">continue current process</td>
</tr>

<tr>
<td class="org-left"><code>SPC m d d</code></td>
<td class="org-left">start debug process, needs to be run first</td>
</tr>

<tr>
<td class="org-left"><code>SPC m d n</code></td>
<td class="org-left">next breakpoint</td>
</tr>

<tr>
<td class="org-left"><code>SPC m d N</code></td>
<td class="org-left">previous breakpoint</td>
</tr>

<tr>
<td class="org-left"><code>SPC m d p</code></td>
<td class="org-left">previous breakpoint</td>
</tr>

<tr>
<td class="org-left"><code>SPC m d r</code></td>
<td class="org-left">refresh process buffer</td>
</tr>

<tr>
<td class="org-left"><code>SPC m d s</code></td>
<td class="org-left">step into the next function</td>
</tr>

<tr>
<td class="org-left"><code>SPC m d t</code></td>
<td class="org-left">trace the expression</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgd8a1bb8" class="outline-3">
<h3 id="debug-buffer"><a id="orgd8a1bb8"></a><span class="section-number-3">3.3</span> Debug Buffer</h3>
<div class="outline-text-3" id="text-debug-buffer">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>RET</code></td>
<td class="org-left">select object at the point</td>
</tr>

<tr>
<td class="org-left"><code>a</code></td>
<td class="org-left">abandon current computation</td>
</tr>

<tr>
<td class="org-left"><code>b</code></td>
<td class="org-left">break on function</td>
</tr>

<tr>
<td class="org-left"><code>c</code></td>
<td class="org-left">continue the current computation</td>
</tr>

<tr>
<td class="org-left"><code>d</code></td>
<td class="org-left">delete object at the point</td>
</tr>

<tr>
<td class="org-left"><code>i</code></td>
<td class="org-left">step into the next function</td>
</tr>

<tr>
<td class="org-left"><code>r</code></td>
<td class="org-left">refresh the debugger buffer</td>
</tr>

<tr>
<td class="org-left"><code>s</code></td>
<td class="org-left">go to next step to inspect bindings</td>
</tr>

<tr>
<td class="org-left"><code>S</code></td>
<td class="org-left">go to previous step to inspect the bindings</td>
</tr>

<tr>
<td class="org-left"><code>t</code></td>
<td class="org-left">trace the expression</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgc42d549" class="outline-3">
<h3 id="repl"><a id="orgc42d549"></a><span class="section-number-3">3.4</span> REPL</h3>
<div class="outline-text-3" id="text-repl">
<p>
REPL commands are prefixed by <code>SPC m s</code>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m s b</code></td>
<td class="org-left">load or reload the current buffer into the REPL</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s c</code></td>
<td class="org-left">clear the REPL</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s s</code></td>
<td class="org-left">show the REPL without switching to it</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s S</code></td>
<td class="org-left">show and switch to the REPL</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgd583245" class="outline-3">
<h3 id="intero-repl"><a id="orgd583245"></a><span class="section-number-3">3.5</span> Intero REPL</h3>
<div class="outline-text-3" id="text-intero-repl">
<p>
Intero REPL commands are prefixed by <code>SPC m i</code>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m i c</code></td>
<td class="org-left">change directory in the backend process</td>
</tr>

<tr>
<td class="org-left"><code>SPC m i d</code></td>
<td class="org-left">reload the module <code>DevelMain</code> and then run <code>DevelMain.update</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC m i k</code></td>
<td class="org-left">stop the current worker process and kill its associated</td>
</tr>

<tr>
<td class="org-left"><code>SPC m i l</code></td>
<td class="org-left">list hidden process buffers created by <code>intero</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC m i r</code></td>
<td class="org-left">restart the process with the same configuration as before</td>
</tr>

<tr>
<td class="org-left"><code>SPC m i t</code></td>
<td class="org-left">set the targets to use for stack <code>ghci</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgd3c3130" class="outline-3">
<h3 id="cabal-commands"><a id="orgd3c3130"></a><span class="section-number-3">3.6</span> Cabal commands</h3>
<div class="outline-text-3" id="text-cabal-commands">
<p>
Cabal commands are prefixed by <code>SPC m c</code>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m c a</code></td>
<td class="org-left">cabal actions</td>
</tr>

<tr>
<td class="org-left"><code>SPC m c b</code></td>
<td class="org-left">build the current cabal project, i.e. invoke <code>cabal build</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC m c c</code></td>
<td class="org-left">compile the current project, i.e. invoke <code>ghc</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC m c v</code></td>
<td class="org-left">visit the cabal file</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org6293156" class="outline-3">
<h3 id="cabal-files"><a id="org6293156"></a><span class="section-number-3">3.7</span> Cabal files</h3>
<div class="outline-text-3" id="text-cabal-files">
<p>
This commands are available in a cabal file.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m d</code></td>
<td class="org-left">add a dependency to the project</td>
</tr>

<tr>
<td class="org-left"><code>SPC m b</code></td>
<td class="org-left">go to benchmark section</td>
</tr>

<tr>
<td class="org-left"><code>SPC m e</code></td>
<td class="org-left">go to executable section</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t</code></td>
<td class="org-left">go to test-suite section</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m</code></td>
<td class="org-left">go to exposed modules</td>
</tr>

<tr>
<td class="org-left"><code>SPC m l</code></td>
<td class="org-left">go to libary section</td>
</tr>

<tr>
<td class="org-left"><code>SPC m n</code></td>
<td class="org-left">go to next subsection</td>
</tr>

<tr>
<td class="org-left"><code>SPC m p</code></td>
<td class="org-left">go to previous subsection</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s c</code></td>
<td class="org-left">clear the REPL</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s s</code></td>
<td class="org-left">show the REPL without switching to it</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s S</code></td>
<td class="org-left">show and switch to the REPL</td>
</tr>

<tr>
<td class="org-left"><code>SPC m N</code></td>
<td class="org-left">go to next section</td>
</tr>

<tr>
<td class="org-left"><code>SPC m P</code></td>
<td class="org-left">go to previous section</td>
</tr>

<tr>
<td class="org-left"><code>SPC m f</code></td>
<td class="org-left">find or create source-file under the cursor</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org5ed77f6" class="outline-3">
<h3 id="refactor"><a id="org5ed77f6"></a><span class="section-number-3">3.8</span> Refactor</h3>
<div class="outline-text-3" id="text-refactor">
<p>
Refactor commands are prefixed by <code>SPC m r</code>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m r b</code></td>
<td class="org-left">apply all HLint suggestions in the current buffer</td>
</tr>

<tr>
<td class="org-left"><code>SPC m r r</code></td>
<td class="org-left">apply the HLint suggestion under the cursor</td>
</tr>

<tr>
<td class="org-left"><code>SPC m r s</code></td>
<td class="org-left">list all Intero suggestions</td>
</tr>
</tbody>
</table>

<p>
Only some of the HLint suggestions can be applied.
</p>

<p>
To apply the intero suggestions, press `C-c C-c` when the window is open, which
is also shown in the window that appears.
</p>
</div>
</div>

<div id="outline-container-orgb62925a" class="outline-3">
<h3 id="ghc-mod-1"><a id="orgb62925a"></a><span class="section-number-3">3.9</span> Ghc-mod</h3>
<div class="outline-text-3" id="text-ghc-mod-1">
<p>
These commands are only available when ghc-mod is enabled.
</p>

<p>
For more info, see
<a href="http://www.mew.org/~kazu/proj/ghc-mod/en/emacs.html">http://www.mew.org/~kazu/proj/ghc-mod/en/emacs.html</a>
</p>

<p>
ghc-mod commands are prefixed by <code>SPC m m</code>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC t</code></td>
<td class="org-left">insert template</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m u</code></td>
<td class="org-left">insert template with holes</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m a</code></td>
<td class="org-left">select one of possible cases (<code>ghc-auto</code>)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m f</code></td>
<td class="org-left">replace a hole (<code>ghc-refine</code>)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m e</code></td>
<td class="org-left">expand template haskell</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m n</code></td>
<td class="org-left">go to next type hole</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m p</code></td>
<td class="org-left">go to previous type hole</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m &gt;</code></td>
<td class="org-left">make indent deeper</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m &lt;</code></td>
<td class="org-left">make indent shallower</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org5959077" class="outline-4">
<h4 id="insert-template"><a id="org5959077"></a><span class="section-number-4">3.9.1</span> Insert template</h4>
<div class="outline-text-4" id="text-insert-template">
<p>
<code>SPC m m t</code> inserts a template. What this means is that in the beginning of a
buffer, <code>module Foo where</code> is inserted. On a function without signature, the
inferred type is inserted. On a symbol <code>foo</code> without definition, <code>foo =
undefined</code> is inserted or a proper module is imported. <code>SPC m m u</code> inserts a
hole in this case. On a variable, the case is split. When checking with hlint,
original code is replaced with hlint's suggestion if possible.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org8ed8184" class="outline-2">
<h2 id="syntax-checking"><a id="org8ed8184"></a><span class="section-number-2">4</span> Syntax checking</h2>
<div class="outline-text-2" id="text-syntax-checking">
<p>
At the moment there are four components which can check the syntax and indicates
somehow error and warnings in the code. Those components are
</p>

<ul class="org-ul">
<li>flycheck</li>
<li>hlint (via flycheck)</li>
<li>ghc-mod</li>
<li>haskell-mode interactive</li>
</ul>

<p>
As all these components can be active at the same time, it can be tricky to know
which component is displaying which message, especially when they disagree or
one is not working. Only flycheck errors (ghc and hlint) are displayed in the
error list and can be navigated using the standard spacemacs key bindings (under
<code>SPC e</code>) even though errors from other modes might highlight the actual buffer.
</p>
</div>

<div id="outline-container-org9d319fe" class="outline-3">
<h3 id="flycheck"><a id="org9d319fe"></a><span class="section-number-3">4.1</span> Flycheck</h3>
<div class="outline-text-3" id="text-flycheck">
<p>
This is the standard spacemacs way to do syntax checking and the most elaborate.
You need the syntax-checking layer to enable this. Please the documentation for
that layer on how to interact with flycheck.
</p>

<p>
Flycheck has different Haskell checkers: <code>haskell-ghc</code>, <code>haskell-stack-ghc</code> and
<code>haskell-hlint</code>. Normally it can automatically detect the best one to use, but
if it doesn't work, you can change it using <code>SPC e s</code>.
</p>
</div>
</div>

<div id="outline-container-orgfa2a1b6" class="outline-3">
<h3 id="hlint"><a id="orgfa2a1b6"></a><span class="section-number-3">4.2</span> HLint</h3>
<div class="outline-text-3" id="text-hlint">
<p>
HLint is a linter for Haskell. It doesn't detect errors (as long as it can parse
the file) but bad coding style and code smell. The HLint checker is called
<b>after</b> the flycheck GHC checker.
</p>
</div>
</div>

<div id="outline-container-org8b425f3" class="outline-3">
<h3 id="ghc-mod-2"><a id="org8b425f3"></a><span class="section-number-3">4.3</span> ghc-mod</h3>
<div class="outline-text-3" id="text-ghc-mod-2">
<p>
Ghc-mod, when enabled, also does syntax checking. It doesn't highlight errors
but instead displays an exclamation point in the fringe. You can navigate
between errors using <code>ghc-goto-next-error</code> (<code>M-n</code>) and <code>ghc-goto-prev-error</code>
(<code>M-p</code>).
</p>
</div>
</div>

<div id="outline-container-org5a20189" class="outline-3">
<h3 id="interactive-haskell-mode"><a id="org5a20189"></a><span class="section-number-3">4.4</span> Interactive haskell-mode</h3>
<div class="outline-text-3" id="text-interactive-haskell-mode">
<p>
Finally, interactive haskell-mode (<code>SPC m s b</code>) also displays errors. These
errors can be navigated from the interactive buffer (by clicking on the error)
or using <code>haskell-goto-next-error</code> (<code>M-n</code>) and <code>haskell-goto-prev-error</code>
(<code>M-p</code>).
</p>
</div>
</div>

<div id="outline-container-org67c694b" class="outline-3">
<h3 id="flymake"><a id="org67c694b"></a><span class="section-number-3">4.5</span> Flymake</h3>
<div class="outline-text-3" id="text-flymake">
<p>
An alternative to syntax checking is to build your project using
<code>flymake-compile</code>. It doesn't highlight error in the buffer but is more
reliable. The error navigation is similar to interactive haskell-mode.
</p>
</div>
</div>

<div id="outline-container-org475b108" class="outline-3">
<h3 id="troubleshooting"><a id="org475b108"></a><span class="section-number-3">4.6</span> Troubleshooting</h3>
<div class="outline-text-3" id="text-troubleshooting">
<p>
Flycheck and ghc-mod can fail silently for miscellaneous reasons. See the <a href="#faq">5</a>
for troubleshooting.
</p>
</div>
</div>
</div>

<div id="outline-container-org6926d96" class="outline-2">
<h2 id="faq"><a id="org6926d96"></a><span class="section-number-2">5</span> FAQ</h2>
<div class="outline-text-2" id="text-faq">
</div>

<div id="outline-container-org6b40b4c" class="outline-3">
<h3 id="the-repl-doesnt-work"><a id="org6b40b4c"></a><span class="section-number-3">5.1</span> The REPL doesn't work</h3>
<div class="outline-text-3" id="text-the-repl-doesnt-work">
<p>
Usually <code>haskell-mode</code> is great at figuring out which interactive process to
bring up. But if you are experiencing problems with it you can help
<code>haskell-mode</code> by setting <code>haskell-process-type</code> as in following code:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>haskell <span class="org-builtin">:variables</span> haskell-process-type 'stack-ghci<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Available options are:
</p>

<ul class="org-ul">
<li>ghci</li>
<li>cabal-repl</li>
<li>cabal-dev</li>
<li>cabal-ghci</li>
<li>stack-ghci</li>
</ul>
</div>
</div>

<div id="outline-container-org4b55bf0" class="outline-3">
<h3 id="the-repl-is-stuck"><a id="org4b55bf0"></a><span class="section-number-3">5.2</span> The REPL is stuck</h3>
<div class="outline-text-3" id="text-the-repl-is-stuck">
<p>
Make sure that when you are typing anything in REPL there is a space between
what you type and <code>λ&gt;</code>. When there is no space - REPL will behave as if it's
stuck. Usually, when you enter normal state, cursor is moved back, so there is
no required space when you switch to insert mode. There is possible workaround -
just add following snippet to your <code>dotspacemacs/user-config</code> function:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>configuration-layer/package-usedp 'haskell<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'haskell-interactive-mode-hook
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq-local</span> evil-move-cursor-back nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
It will make cursor stay at the right place in the REPL buffer when you enter
normal state. Which in most cases helps you to avoid the problem with 'stuck'
REPL.
</p>

<p>
Also, some users might want to start REPL in insert mode. For this to happen you
could place following snippet in your <code>dotspacemacs/user-config</code> function:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>configuration-layer/package-usedp 'haskell<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">haskell-interactive-switch</span> <span class="org-rainbow-delimiters-depth-3">(</span>after spacemacs/haskell-interactive-switch-advice activate<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>eq dotspacemacs-editing-style 'vim<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>call-interactively 'evil-insert<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org773a47a" class="outline-3">
<h3 id="i-am-using-stack-and-ghc-mod-but-ghc-mod-doesnt-work"><a id="org773a47a"></a><span class="section-number-3">5.3</span> I am using <code>stack</code> and <code>ghc-mod</code>, but <code>ghc-mod</code> doesn't work</h3>
<div class="outline-text-3" id="text-i-am-using-stack-and-ghc-mod-but-ghc-mod-doesnt-work">
<p>
Make sure that <code>dist</code> directory doesn't exist in your project root. So if it
exists, just remove it and try again.
</p>
</div>
</div>

<div id="outline-container-orgd1a854a" class="outline-3">
<h3 id="ghc-mod-doesnt-work"><a id="orgd1a854a"></a><span class="section-number-3">5.4</span> <code>ghc-mod</code> doesn't work</h3>
<div class="outline-text-3" id="text-ghc-mod-doesnt-work">
<p>
First of all - make sure that the version of <code>ghc</code> matches the version of <code>ghc</code> that
was used to build <code>ghc-mod</code>. To get the latter call <code>ghc-mod --version</code> in terminal.
If they don't match you have to rebuild <code>ghc-mod</code>.
</p>

<p>
<code>Stack</code> provides ability to use different <code>ghc</code> versions across different projects.
In case you are using this feature you have to rebuild <code>ghc-mod</code> quite often. If
you use <code>ghc-mod</code> only for completion and don't want to rebuild <code>ghc-mod</code> every time
you switch project you'd better disable <code>ghc-mod</code> support, so <code>company-ghci</code> will be
used for completion.
</p>

<p>
The second thing to do if it's still not working - call <code>ghc-mod debug</code> in the
root of project you are currently working on. Make sure that it shows no errors.
If there are errors you can't solve - it's better to report them <a href="https://github.com/DanielG/ghc-mod">upstream</a>.
</p>
</div>
</div>

<div id="outline-container-org690ca3c" class="outline-3">
<h3 id="indentation-doesnt-reset-when-pressing-return-after-an-empty-line"><a id="org690ca3c"></a><span class="section-number-3">5.5</span> Indentation doesn't reset when pressing return after an empty line</h3>
<div class="outline-text-3" id="text-indentation-doesnt-reset-when-pressing-return-after-an-empty-line">
<p>
This is the intended behavior in <code>haskell-indentation-mode</code>. If you want to
reset indentation when pressing return after an empty line, add the following
snippet into your <code>dotspacemacs/user-config</code> function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">haskell-indentation-advice</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span>&lt; <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-5">(</span>line-number-at-pos<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span>
               <span class="org-rainbow-delimiters-depth-5">(</span>forward-line <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-5">)</span>
               <span class="org-rainbow-delimiters-depth-5">(</span>string= <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-6">(</span>s-trim <span class="org-rainbow-delimiters-depth-7">(</span>buffer-substring <span class="org-rainbow-delimiters-depth-8">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>line-end-position<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>delete-region <span class="org-rainbow-delimiters-depth-4">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>point<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>advice-add 'haskell-indentation-newline-and-indent
            <span class="org-builtin">:after</span> 'haskell-indentation-advice<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1b689fd" class="outline-3">
<h3 id="flycheck-displays-hlint-warnings-but-not-errors"><a id="org1b689fd"></a><span class="section-number-3">5.6</span> Flycheck displays HLint warnings but not errors</h3>
<div class="outline-text-3" id="text-flycheck-displays-hlint-warnings-but-not-errors">
<p>
The HLint checker is called <b>after</b> normal flycheck checker even if the checker
fails. Check the <a href="#flycheck-doesnt-work">5.8</a> section.
</p>
</div>
</div>

<div id="outline-container-orgde86bb3" class="outline-3">
<h3 id="i-can-see-highlighted-errors-but-they-dont-appear-in-the-error-list"><a id="orgde86bb3"></a><span class="section-number-3">5.7</span> I can see highlighted errors but they don't appear in the error list</h3>
<div class="outline-text-3" id="text-i-can-see-highlighted-errors-but-they-dont-appear-in-the-error-list">
<p>
The error list is only set by flycheck. You are probably seeing errors
highlighted by either ghc-mode or haskell-mode. Check the <a href="#flycheck-doesnt-work">5.8</a>
section.
</p>
</div>
</div>

<div id="outline-container-orge1f39c8" class="outline-3">
<h3 id="flycheck-doesnt-work"><a id="orge1f39c8"></a><span class="section-number-3">5.8</span> Flycheck doesn't work</h3>
<div class="outline-text-3" id="text-flycheck-doesnt-work">
<p>
You can check what is wrong with flycheck with the <code>flycheck-compile</code> command.
This will show you the exact command line used and its output.
</p>

<p>
If you are using stack, check the <a href="#flycheck-doesnt-work-with-stack">5.9</a> section.
</p>
</div>
</div>

<div id="outline-container-org3b781be" class="outline-3">
<h3 id="flycheck-doesnt-work-with-stack"><a id="org3b781be"></a><span class="section-number-3">5.9</span> Flycheck doesn't work with <code>stack</code></h3>
<div class="outline-text-3" id="text-flycheck-doesnt-work-with-stack">
<p>
First check that flycheck uses the correct checker and all the paths are
properly configured using <code>flycheck-verify-setup</code> (<code>SPC e v</code>). You can force the
checker with <code>flycheck-select-checker</code> (<code>SPC e s</code>) to ensure it uses
<code>haskell-stack-ghc</code>. If it still doesn't work, it could be one of the following
problems:
</p>

<ul class="org-ul">
<li>The stack build directory is wrong</li>
<li>The project root is not set properly</li>
</ul>
</div>

<div id="outline-container-orgdf6dcf6" class="outline-4">
<h4 id="the-stack-build-directory-is-wrong"><a id="orgdf6dcf6"></a><span class="section-number-4">5.9.1</span> The stack build directory is wrong</h4>
<div class="outline-text-4" id="text-the-stack-build-directory-is-wrong">
<p>
The path to the build directory containing some generated files is normally
under <code>.stack-work/install/&lt;os&gt;/Cabal-&lt;version&gt;/build</code>.
</p>

<p>
However, the version of the cabal library used by stack to generate the
directory name is not the version of the cabal library installed by stack, but
the version of cabal associated to the GHC version. This error can happen after
upgrading cabal or cabal-install. To check if this is the problem, compare the
path name of the build path used by flycheck using <code>flycheck-compile</code> and
compare it to to the actual path in the <code>.stack-work</code> directory. If they are
different you need to reinstall ghc using the command <code>stack setup
--upgrade-cabal</code>.
</p>
</div>
</div>

<div id="outline-container-orgef6b9ca" class="outline-4">
<h4 id="the-project-root-directory-is-not-set-properly"><a id="orgef6b9ca"></a><span class="section-number-4">5.9.2</span> The Project root directory is not set properly</h4>
<div class="outline-text-4" id="text-the-project-root-directory-is-not-set-properly">
<p>
Flycheck launches the GHC command not from the project root directory but from
the the directory of the file being checked. This is normally not a problem as
all the paths are set properly, however it could be a problem if some template
Haskell functions use relative paths (e.g. in Yesod scaffolded projects).
</p>

<p>
Until it's fixed in flycheck the workaround is to the wrap the stack command to
run all subcommands from the project root directory. You can do so with the
following script:
</p>

<div class="org-src-container">
<pre class="src src-bash"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-builtin">cd</span> <span class="org-sh-quoted-exec">`stack --project-root`</span>
stack $<span class="org-variable-name">*</span>
</pre>
</div>

<p>
Make sure you set <code>flycheck-haskell-stack-ghc-executable</code> to this script.
</p>
</div>
</div>
</div>

<div id="outline-container-org79684d3" class="outline-3">
<h3 id="haskell-mode-commands-dont-work"><a id="org79684d3"></a><span class="section-number-3">5.10</span> haskell-mode commands don't work</h3>
<div class="outline-text-3" id="text-haskell-mode-commands-dont-work">
<p>
Some (most of) the haskell-mode commands only works when haskell-mode is in
interactive mode, i.e. as a interactive session associated to it. Load it using
<code>SPC m s b</code>.
</p>
</div>
</div>

<div id="outline-container-org08d929d" class="outline-3">
<h3 id="ghc-mod-and-haskell-mode-commands-overlap-how-do-i-know-which-command-belongs-to-what"><a id="org08d929d"></a><span class="section-number-3">5.11</span> <code>ghc-mod</code> and <code>haskell-mode</code> commands overlap. How do I know which command belongs to what?</h3>
<div class="outline-text-3" id="text-ghc-mod-and-haskell-mode-commands-overlap-how-do-i-know-which-command-belongs-to-what">
<p>
ghc-mod commands are prefixed with <code>ghc-</code>, haskell-mode ones are prefixed with
<code>haskell-</code>.
</p>
</div>
</div>

<div id="outline-container-org78d4fdb" class="outline-3">
<h3 id="some-commands-start-with-ghc--and-some-with-haskell--what-does-that-mean"><a id="org78d4fdb"></a><span class="section-number-3">5.12</span> Some commands start with <code>ghc-</code> and some with <code>haskell-</code>. What does that mean?</h3>
<div class="outline-text-3" id="text-some-commands-start-with-ghc--and-some-with-haskell--what-does-that-mean">
<p>
Commands starting with <code>ghc-</code> are ghc-mod commands. Commands starting with
<code>haskell-</code> are haskell-mode commands.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2017-04-29 Sat 04:11</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
