<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-10-03 Mon 00:55 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>Helm Gtags layer</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Sylvain Benner" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css"
                 href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
          <script type="text/javascript"
                  src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
          <script>
           (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
               (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
               Date();a=s.createElement(o),
               m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
               })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

           ga('create', 'UA-28326243-2', 'auto'); ga('send', 'pageview');
          </script>
<link rel="stylesheet" type="text/css" href="../../../css/readtheorg.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="toggle-sidebar"><a href="#table-of-contents"><h2>Table of Contents</h2></a></div>
<h1 class="title">Helm Gtags layer</h1>
<div id="table-of-contents">
<h2>Table of Contents<a href="#">Close</a></h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#description">1. Description</a></li>
<li><a href="#features">2. Features</a></li>
<li><a href="#install">3. Install</a>
<ul>
<li><a href="#gnu-global-gtags">3.1. GNU Global (gtags)</a>
<ul>
<li><a href="#install-on-osx-using-homebrew">3.1.1. Install on OSX using Homebrew</a></li>
<li><a href="#install-on-nix-from-source">3.1.2. Install on *nix from source</a></li>
</ul>
</li>
<li><a href="#emacs-configuration">3.2. Emacs Configuration</a>
<ul>
<li><a href="#disabling-by-default">3.2.1. Disabling by default</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#usage">4. Usage</a>
<ul>
<li>
<ul>
<li><a href="#language-support">4.0.1. Language Support</a></li>
</ul>
</li>
<li><a href="#eldoc-integration">4.1. Eldoc integration</a></li>
</ul>
</li>
<li><a href="#key-bindings">5. Key bindings</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="description"><a id="orgheadline1"></a><span class="section-number-2">1</span> Description</h2>
<div class="outline-text-2" id="text-description">
<p>
<code>helm-gtags</code> and <code>ggtags</code> are clients for GNU Global. GNU Global is a source
code tagging system that allows querying symbol locations in source code, such
as definitions or references. Adding the <code>gtags</code> layer enables both of these
modes.
</p>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="features"><a id="orgheadline2"></a><span class="section-number-2">2</span> Features</h2>
<div class="outline-text-2" id="text-features">
<ul class="org-ul">
<li>Select any tag in a project retrieved by gtags</li>
<li>Resume previous helm-gtags session</li>
<li>Jump to a location based on context</li>
<li>Find definitions</li>
<li>Find references</li>
<li>Present tags in current function only</li>
<li>Create a tag database</li>
<li>Jump to definitions in file</li>
<li>Show stack of visited locations</li>
<li>Manually update tag database</li>
<li>Jump to next location in context stack</li>
<li>Jump to previous location in context stack</li>
<li>Jump to a file in tag database</li>
<li>Enables <code>eldoc</code> in modes that otherwise might not support it.</li>
<li>Enables <code>company complete</code> in modes that otherwise might not support it.</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-2">
<h2 id="install"><a id="orgheadline11"></a><span class="section-number-2">3</span> Install</h2>
<div class="outline-text-2" id="text-install">
</div>


<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="gnu-global-gtags"><a id="orgheadline8"></a><span class="section-number-3">3.1</span> GNU Global (gtags)</h3>
<div class="outline-text-3" id="text-gnu-global-gtags">
<p>
To use gtags, you first have to install <a href="https://www.gnu.org/software/global/download.html">GNU Global</a>.
</p>

<p>
You can install <code>global</code> from the software repository of your OS; however, many
OS distributions are out of date, and you will probably be missing support for
<code>pygments</code> and <code>exuberant ctags</code>, and thus support for many languages. We
recommend installing from source. If not for example to install on Ubuntu:
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo apt-get install global
</pre>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-4">
<h4 id="install-on-osx-using-homebrew"><a id="orgheadline3"></a><span class="section-number-4">3.1.1</span> Install on OSX using Homebrew</h4>
<div class="outline-text-4" id="text-install-on-osx-using-homebrew">
<div class="org-src-container">

<pre class="src src-sh">brew install global --with-pygments --with-ctags
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-4">
<h4 id="install-on-nix-from-source"><a id="orgheadline7"></a><span class="section-number-4">3.1.2</span> Install on *nix from source</h4>
<div class="outline-text-4" id="text-install-on-nix-from-source">
</div>

<ol class="org-ol"><li><a id="install-recommended-dependencies"></a><a id="orgheadline4"></a>Install recommended dependencies<br  /><div class="outline-text-5" id="text-install-recommended-dependencies">
<p>
To take full advantage of global you should install 2 extra packages in
addition to global: pygments and ctags (exuberant). You can do this using
your normal OS package manager, e.g., on Ubuntu
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo apt-get install exuberant-ctags python-pygments
</pre>
</div>

<p>
or e.g., Archlinux:
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo pacman -S ctags python-pygments
</pre>
</div>
</div></li>

<li><a id="install-with-recommended-features"></a><a id="orgheadline5"></a>Install with recommended features<br  /><div class="outline-text-5" id="text-install-with-recommended-features">
<p>
Download the latest tar.gz archive, then run these commands:
</p>

<div class="org-src-container">

<pre class="src src-sh">tar xvf global-6.5.3.tar.gz
<span class="org-builtin">cd</span> global-6.5.3
./configure --with-exuberant-ctags=/usr/bin/ctags
make
sudo make install
</pre>
</div>
</div></li>

<li><a id="configure-your-environment-to-use-pygments-and-ctags"></a><a id="orgheadline6"></a>Configure your environment to use pygments and ctags<br  /><div class="outline-text-5" id="text-configure-your-environment-to-use-pygments-and-ctags">
<p>
To be able to use <code>pygments</code> and <code>ctags</code>, you need to copy the sample
<code>gtags.conf</code> either to <code>/etc/gtags.conf</code> or <code>$HOME/.globalrc</code>. For example:
</p>

<div class="org-src-container">

<pre class="src src-sh">cp gtags.conf ~/.globalrc
</pre>
</div>

<p>
Additionally you should define GTAGSLABEL in your shell startup file e.g.
with sh/ksh:
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">echo</span> export <span class="org-variable-name">GTAGSLABEL</span>=pygments &gt;&gt; .profile
</pre>
</div>
</div></li></ol>
</div>
</div>

<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="emacs-configuration"><a id="orgheadline10"></a><span class="section-number-3">3.2</span> Emacs Configuration</h3>
<div class="outline-text-3" id="text-emacs-configuration">
<p>
To use this configuration layer, add it to your <code>~/.spacemacs</code>. You
will need to add <code>gtags</code> to the existing <code>dotspacemacs-configuration-layers</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq dotspacemacs-configuration-layers
      '<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">...</span>
        gtags
         <span class="org-comment-delimiter">;; </span><span class="org-comment">...</span>
        <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-4">
<h4 id="disabling-by-default"><a id="orgheadline9"></a><span class="section-number-4">3.2.1</span> Disabling by default</h4>
<div class="outline-text-4" id="text-disabling-by-default">
<p>
If <code>ggtags-mode</code> is too intrusive you can disable it by default, by setting the
layer variable <code>gtags-enable-by-default</code> to <code>nil</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq-default dotspacemacs-configuration-layers
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>gtags <span class="org-builtin">:variables</span> gtags-enable-by-default t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
This variable can also be set as a file-local or directory-local variable for
additional control per project.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-2">
<h2 id="usage"><a id="orgheadline18"></a><span class="section-number-2">4</span> Usage</h2>
<div class="outline-text-2" id="text-usage">
<p>
Before using the <code>gtags</code>, remember to create a GTAGS database by the following
methods:
</p>

<ul class="org-ul">
<li>From within Emacs, runs the command <code>helm-gtags-create-tags</code>, which is bound
to <code>SPC m g c</code>. If the language is not directly supported by GNU Global, you
can choose <code>ctags</code> or <code>pygments</code> as a backend to generate tag database.</li>

<li>From inside terminal, runs gtags at your project root in terminal:</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">cd</span> /path/to/project/root
gtags
</pre>
</div>

<p>
If the language is not directly supported by <code>gtags</code>, and you have not set the
GTAGSLABEL environment variable, use this command instead:
</p>

<div class="org-src-container">

<pre class="src src-sh">gtags --gtagslabel=pygments
</pre>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-4">
<h4 id="language-support"><a id="orgheadline16"></a><span class="section-number-4">4.0.1</span> Language Support</h4>
<div class="outline-text-4" id="text-language-support">
</div>

<ol class="org-ol"><li><a id="built-in-languages"></a><a id="orgheadline12"></a>Built-in languages<br  /><div class="outline-text-5" id="text-built-in-languages">
<p>
If you do not have <code>ctags</code> or <code>pygments</code> enabled gtags will only produce
tags for the following languages:
</p>

<ul class="org-ul">
<li>asm</li>
<li>c/c++</li>
<li>java</li>
<li>php</li>
<li>yacc</li>
</ul>
</div></li>

<li><a id="exuberant-ctags-languages"></a><a id="orgheadline13"></a>Exuberant ctags languages<br  /><div class="outline-text-5" id="text-exuberant-ctags-languages">
<p>
If you have enabled <code>exuberant ctags</code> and use that as the backend (i.e.,
GTAGSLABEL=ctags or &#x2013;gtagslabel=ctags) the following additional languages
will have tags created for them:
</p>

<ul class="org-ul">
<li>c#</li>
<li>erlang</li>
<li>javascript</li>
<li>common-lisp</li>
<li>emacs-lisp</li>
<li>lua</li>
<li>ocaml</li>
<li>python</li>
<li>ruby</li>
<li>scheme</li>
<li>vimscript</li>
<li>windows-scripts (.bat .cmd files)</li>
</ul>
</div></li>

<li><a id="universal-ctags-languages"></a><a id="orgheadline14"></a>Universal ctags languages<br  /><div class="outline-text-5" id="text-universal-ctags-languages">
<p>
If instead you installed you the newer/beta <code>universal ctags</code> and use that
as the backend (i.e., GTAGSLABEL=ctags or &#x2013;gtagslabel=ctags) the following
additional languages will have tags created for them:
</p>

<ul class="org-ul">
<li>clojure</li>
<li>d</li>
<li>go</li>
<li>rust</li>
</ul>
</div></li>

<li><a id="pygments-languages-plus-symbol-and-reference-tags"></a><a id="orgheadline15"></a>Pygments languages (plus symbol and reference tags)<br  /><div class="outline-text-5" id="text-pygments-languages-plus-symbol-and-reference-tags">
<p>
In order to look up symbol references for any language not in the built in
parser you must use the pygments backend. When this backend is used global
actually uses both ctags and pygments to find the definitions and uses of
functions and variables as well as "other symbols".
</p>

<p>
If you enabled pygments (the best choice) and use that as the backend (i.e.,
GTAGSLABEL=pygments or &#x2013;gtagslabel=pygments) the following additional
languages will have tags created for them:
</p>

<ul class="org-ul">
<li>elixir</li>
<li>fsharp</li>
<li>haskell</li>
<li>octave</li>
<li>racket</li>
<li>scala</li>
<li>shell-scripts</li>
<li>tex</li>
</ul>
</div></li></ol>
</div>

<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="eldoc-integration"><a id="orgheadline17"></a><span class="section-number-3">4.1</span> Eldoc integration</h3>
<div class="outline-text-3" id="text-eldoc-integration">
<p>
This layer also integrates <code>ggtags</code> for its Eldoc feature. That means, when
writing code, you can look at the minibuffer (at the bottom) and see variable
and function definition of the symbol the cursor is on. However, this feature is
only activated for programming modes that are not one of these languages:
</p>

<ul class="org-ul">
<li>C</li>
<li>C++</li>
<li>Common Lisp</li>
<li>Emacs Lisp</li>
<li>Python</li>
<li>Ruby</li>
</ul>

<p>
Since these modes have better Eldoc integration already.
</p>

<p>
In addition, if output from <code>compile</code> (bound to <code>SPC c C</code>), <code>shell-command</code>
(bound to <code>SPC !</code> and <code>M-!</code>) or <code>async-shell-command</code> (bound to <code>M-&amp;</code>) commands
contains symbol in your project, you move cursor on such symbol and use any of
the gtags commands.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-2">
<h2 id="key-bindings"><a id="orgheadline19"></a><span class="section-number-2">5</span> Key bindings</h2>
<div class="outline-text-2" id="text-key-bindings">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m g c</code></td>
<td class="org-left">create a tag database</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g f</code></td>
<td class="org-left">jump to a file in tag database</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g g</code></td>
<td class="org-left">jump to a location based on context</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g G</code></td>
<td class="org-left">jump to a location based on context (open another window)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g d</code></td>
<td class="org-left">find definitions</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g i</code></td>
<td class="org-left">present tags in current function only</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g l</code></td>
<td class="org-left">jump to definitions in file</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g n</code></td>
<td class="org-left">jump to next location in context stack</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g p</code></td>
<td class="org-left">jump to previous location in context stack</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g r</code></td>
<td class="org-left">find references</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g R</code></td>
<td class="org-left">resume previous helm-gtags session</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g s</code></td>
<td class="org-left">select any tag in a project retrieved by gtags</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g S</code></td>
<td class="org-left">show stack of visited locations</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g u</code></td>
<td class="org-left">manually update tag database</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Sylvain Benner</p>
<p class="date">Created: 2016-10-03 Mon 00:55</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
